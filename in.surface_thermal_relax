# INITIALIZATION
clear

units metal
atom_style atomic
boundary p p f

variable name index STGB_210
variable dt equal 0.001 #ps
variable T index 500
variable initial_relaxation_steps index 3000
timestep ${dt}

# ATOMS DEFINITION
read_data ${name}_relaxed_${T}.dat 
replicate 3 1 3
region vac block EDGE EDGE EDGE EDGE $((zlo+zhi)/2) EDGE
delete_atoms region vac compress yes
region mobile block EDGE EDGE EDGE EDGE 6.7 EDGE
group mobile region mobile
######################################
# DEFINE INTERATOMIC POTENTIAL

include GB_potential_Ag.txt

######################################
# FIXES
compute peratom all pe/atom
write_dump all cfg dump.segregation_start.cfg mass type xs ys zs
print """


Relaxation ${initial_relaxation_steps}


"""
thermo_style custom step time temp pe
thermo 100
variable file index surface_thermal_relax.txt
print "##dt = ${dt}" file ${file} screen no
print "#time; temp; pe; conc" append ${file} screen no
fix out all print 100 "$(time); $(temp); $(pe)" append ${file} screen no
shell mkdir "dump_surface_thermal_relax"
dump 1 all cfg 500 dump_surface_thermal_relax/dump.${name}_*.cfg mass type xs ys zs c_peratom
dump_modify 1 element Ag Ag
fix NVT mobile nvt temp ${T} ${T} $(100*dt) 
run ${initial_relaxation_steps}
write_data ${name}_surface_thermal_relaxed_T_${T}.dat

